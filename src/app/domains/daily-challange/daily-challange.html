<div class="daily-challenge">

  <!-- Section 1: Exercises -->
  <section class="exercises-section">
    <h2>Daily Exercises</h2>
    <table mat-table [dataSource]="exercises()" class="mat-elevation-z8">

      <!-- </table>Name Column -->
      <ng-container matColumnDef="name">
        <th mat-header-cell *matHeaderCellDef> Name </th>
        <td mat-cell *matCellDef="let exercise"> {{exercise.name}} </td>
      </ng-container>

      <!-- Target Column -->
      <ng-container matColumnDef="target">
        <th mat-header-cell *matHeaderCellDef> Target </th>
        <td mat-cell *matCellDef="let exercise"> {{exercise.target}} </td>
      </ng-container>

      <!-- Unit Column -->
      <ng-container matColumnDef="unit">
        <th mat-header-cell *matHeaderCellDef> Unit </th>
        <td mat-cell *matCellDef="let exercise"> {{exercise.unit | uppercase}} </td>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="['name', 'target', 'unit']"></tr>
      <tr mat-row *matRowDef="let row; columns: ['name', 'target', 'unit'];"></tr>
    </table>
  </section>

  <!-- Section 2: Users and Their Exercise States (without table) -->
  <section class="users-section">
    <h2>Users Progress</h2>
    <div class="members-list">
      @for (member of members(); track member.id) {
      <mat-card class="member-card">
        <mat-card-title>{{ member.name }}</mat-card-title>
        <mat-card-content>
          <div class="exercise-status-list">
            @for (exercise of exercises(); track exercise.id) {
            <div class="exercise-status-row"
              style="display: flex; align-items: center; justify-content: space-between; gap: 16px; padding: 8px 0;">
              <div class="exercise-name" style="padding-right: 12px;">{{ exercise.name }}</div>
              <div class="exercise-action">
                <div class="exercise-action-content" style="display: flex; align-items: center; gap: 8px;">
                  @if (exerciseCompleted(exercise.id, member.id)) {
                  <span style="color: green; font-weight: 500;">Completed</span>
                  } @else {
                  <button mat-raised-button color="accent" style="min-width: 90px; font-weight: 500;"
                    (click)="completeExercise(exercise.id, member.id)">
                    Complete
                  </button>
                  }
                </div>
              </div>
            </div>
            }
          </div>
        </mat-card-content>
      </mat-card>
      }
    </div>
  </section>

</div>